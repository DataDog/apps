<!DOCTYPE html>
<html>
    <head>
        <title>FramePost sandbox: Child</title>
    </head>
    <body>
        <h4>FramePost sandbox: Child</h4>
        <script src="dist/framepost.min.js"></script>
        <script>
            const client = new framepost.ChildClient({
                profile: true,
                parentContext: { version: '0.1.0' }
            });
            client
                .getContext()
                .then(context =>
                    console.log('received context from parent', context)
                );
            client.on('down', data =>
                console.log('received data from parent', data)
            );
            client.send('up', { data: 'up' });

            client.handleRequest('requestFromChild', async () => {
                await new Promise(res => setTimeout(res, 1000));

                return 'childResponse';
            });

            client.request('requestFromParent').then(data => {
                console.log('received requested data from parent', data);
            });
        </script>
    </body>
</html>
