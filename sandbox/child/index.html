<!DOCTYPE html>
<html>
    <head>
        <title>Datadog UI Apps SDK Sandbox: Child</title>
    </head>
    <body>
        <h4>Datadog UI Apps SDK Sandbox: Child</h4>
        <div id="target">Link to public dashboard:&nbsp</div>
        <script src="dist/main.js"></script>
        <script>
            const client = DD_SDK.init({ debug: true }, context => {
                console.log('Received app context', context);
            })

            client.on('dashboard_cog_menu_context', context => {
                console.log('Received dashboard cog menu context', context);

                const a = document.createElement('a');
                a.href = context.shareToken;
                a.target = '_blank';
                a.innerHTML = 'Link';

                document.getElementById('target').appendChild(a);
            });

            // wait for secret to get sent
            setTimeout(() => {
                client.getSecret('test').then(secret => {
                    console.log(`The value of secret "test" is "${secret}"`)
                });
            }, 500)
        </script>
    </body>
</html>
